# DW Dashboard Management 功能验证指南

## 📋 文档信息
- **版本**: v1.0
- **创建日期**: 2026-01-30
- **更新日期**: 2026-01-30
- **状态**: 已完成

---

## 🎯 验证目标

本指南用于验收DW Dashboard Management系统的前端功能，确保所有功能模块正常工作，交互流畅，用户体验良好。

---

## 🚀 快速启动

### 方式一：使用启动脚本（推荐）

```bash
# 进入项目根目录
cd /Users/zengrongjun/claudespace/dw-dashboard-management

# 运行启动脚本
./bin/start-verification.sh

# 选择 "1" 启动Mock模式
```

### 方式二：手动启动

```bash
# 进入前端目录
cd frontend

# 安装依赖（首次运行）
npm install

# 启动Mock模式
npm run dev

# 浏览器访问
http://localhost:3000?mock=true
```

### 方式三：直接在URL中启用Mock

```bash
# 正常启动前端
npm run dev

# 在浏览器中访问（URL中添加 ?mock=true）
http://localhost:3000?mock=true
```

---

## 👤 测试账号

| 用户名 | 密码 | 角色 | 说明 |
|--------|------|------|------|
| admin | 123456 | 管理员 | 拥有所有权限 |
| analyst | 123456 | 分析师 | 可以创建和编辑报表 |
| viewer | 123456 | 查看者 | 只能查看报表 |

---

## ✅ 功能验证清单

### 1. 登录功能验证

#### 1.1 正常登录
- [ ] 输入用户名 `admin`，密码 `123456`
- [ ] 点击"登录"按钮
- [ ] 验证是否成功跳转到报表管理页面
- [ ] 验证顶部是否显示用户信息

#### 1.2 登录失败
- [ ] 输入错误的用户名或密码
- [ ] 点击"登录"按钮
- [ ] 验证是否显示错误提示信息

#### 1.3 表单验证
- [ ] 不输入用户名，点击登录
- [ ] 验证是否显示"请输入用户名"提示
- [ ] 不输入密码，点击登录
- [ ] 验证是否显示"请输入密码"提示

**预期结果**:
- ✅ 登录成功后跳转到报表管理页面
- ✅ 登录失败显示错误提示
- ✅ 表单验证正常工作

---

### 2. 数据源管理验证

#### 2.1 数据源列表
- [ ] 点击左侧菜单"数据源管理"
- [ ] 验证是否显示数据源列表
- [ ] 验证列表是否包含以下列：ID、名称、类型、主机、端口、数据库、状态、创建时间、操作
- [ ] 验证是否显示3条Mock数据：
  - MySQL测试库
  - PostgreSQL生产库
  - ClickHouse数据仓库

#### 2.2 搜索功能
- [ ] 在搜索框输入"MySQL"
- [ ] 点击"搜索"按钮
- [ ] 验证是否只显示包含"MySQL"的数据源

#### 2.3 新建数据源
- [ ] 点击"新建数据源"按钮
- [ ] 填写表单：
  - 名称：测试数据源
  - 类型：MySQL
  - 主机：localhost
  - 端口：3306
  - 数据库：test
  - 用户名：root
  - 密码：123456
- [ ] 点击"测试连接"按钮
- [ ] 验证是否显示连接测试结果
- [ ] 点击"确定"按钮
- [ ] 验证是否成功创建并显示在列表中

#### 2.4 编辑数据源
- [ ] 点击某个数据源的"编辑"按钮
- [ ] 修改数据源名称
- [ ] 点击"确定"按钮
- [ ] 验证是否成功更新

#### 2.5 删除数据源
- [ ] 点击某个数据源的"删除"按钮
- [ ] 确认删除操作
- [ ] 验证数据源是否从列表中移除

#### 2.6 状态切换
- [ ] 点击某个数据源的状态开关
- [ ] 验证状态是否切换（启用/禁用）

**预期结果**:
- ✅ 数据源列表正常显示
- ✅ 搜索功能正常工作
- ✅ 新建、编辑、删除功能正常
- ✅ 测试连接功能正常
- ✅ 状态切换功能正常

---

### 3. 报表管理验证

#### 3.1 报表列表
- [ ] 点击左侧菜单"报表管理"
- [ ] 验证是否显示报表列表
- [ ] 验证列表是否包含以下列：ID、报表名称、描述、分类、状态、创建人、创建时间、操作
- [ ] 验证是否显示3条Mock数据：
  - 销售数据报表（已发布）
  - 用户分析报表（已发布）
  - 订单统计报表（草稿）

#### 3.2 状态筛选
- [ ] 点击状态筛选下拉框
- [ ] 选择"已发布"
- [ ] 验证是否只显示已发布的报表
- [ ] 选择"草稿"
- [ ] 验证是否只显示草稿状态的报表

#### 3.3 搜索功能
- [ ] 在搜索框输入"销售"
- [ ] 点击"搜索"按钮
- [ ] 验证是否只显示包含"销售"的报表

#### 3.4 查看报表详情
- [ ] 点击某个报表的"查看"按钮
- [ ] 验证是否跳转到报表详情页
- [ ] 验证是否显示报表基本信息
- [ ] 验证是否显示查询配置（SQL语句、参数等）
- [ ] 验证是否显示展示配置（图表类型、列配置等）

#### 3.5 编辑报表
- [ ] 在报表列表点击"编辑"按钮
- [ ] 验证是否跳转到报表设计器
- [ ] 验证表单是否填充了报表数据

#### 3.6 发布报表
- [ ] 找到一个草稿状态的报表
- [ ] 点击"发布"按钮
- [ ] 确认发布操作
- [ ] 验证报表状态是否变为"已发布"

#### 3.7 下线报表
- [ ] 找到一个已发布的报表
- [ ] 点击"下线"按钮
- [ ] 确认下线操作
- [ ] 验证报表状态是否变为"已下线"

#### 3.8 删除报表
- [ ] 点击某个报表的"删除"按钮
- [ ] 确认删除操作
- [ ] 验证报表是否从列表中移除

**预期结果**:
- ✅ 报表列表正常显示
- ✅ 状态筛选功能正常
- ✅ 搜索功能正常
- ✅ 查看详情功能正常
- ✅ 编辑、发布、下线、删除功能正常

---

### 4. 报表设计器验证

#### 4.1 新建报表
- [ ] 点击左侧菜单"报表设计"
- [ ] 验证是否显示报表设计器表单
- [ ] 填写表单：
  - 报表名称：测试报表
  - 描述：这是一个测试报表
  - 分类：测试分类
  - 数据源：选择"MySQL测试库"
  - 是否公开：开启
  - SQL语句：`SELECT * FROM test_table WHERE date >= :startDate`
  - 启用缓存：开启
  - 缓存过期时间：300秒
  - 启用分页：关闭
  - 超时时间：30秒
  - 图表类型：选择"折线图"
- [ ] 点击"保存"按钮
- [ ] 验证是否成功创建报表

#### 4.2 编辑报表
- [ ] 从报表列表进入编辑模式
- [ ] 修改报表名称
- [ ] 修改SQL语句
- [ ] 修改图表类型
- [ ] 点击"保存"按钮
- [ ] 验证是否成功更新

#### 4.3 表单验证
- [ ] 不填写报表名称，点击保存
- [ ] 验证是否显示"请输入报表名称"提示
- [ ] 不选择数据源，点击保存
- [ ] 验证是否显示"请选择数据源"提示
- [ ] 不填写SQL语句，点击保存
- [ ] 验证是否显示"请输入SQL语句"提示

**预期结果**:
- ✅ 新建报表功能正常
- ✅ 编辑报表功能正常
- ✅ 表单验证正常工作
- ✅ 所有配置项都能正常保存

---

### 5. 报表查看（执行查询）验证

#### 5.1 查看销售数据报表
- [ ] 在报表列表点击"销售数据报表"的"查看"按钮
- [ ] 验证是否显示参数输入表单
- [ ] 验证是否显示两个日期选择器（开始日期、结束日期）
- [ ] 选择日期范围
- [ ] 点击"执行查询"按钮
- [ ] 验证是否显示加载状态
- [ ] 验证是否显示查询结果（折线图）
- [ ] 验证图表是否正确渲染
- [ ] 验证图表数据是否正确

#### 5.2 查看用户分析报表
- [ ] 在报表列表点击"用户分析报表"的"查看"按钮
- [ ] 验证是否自动执行查询（无参数）
- [ ] 验证是否显示饼图
- [ ] 验证饼图数据是否正确（普通用户、VIP用户、企业用户）

#### 5.3 查看订单统计报表
- [ ] 在报表列表点击"订单统计报表"的"查看"按钮
- [ ] 验证是否显示参数输入表单（开始日期）
- [ ] 选择日期
- [ ] 点击"执行查询"按钮
- [ ] 验证是否显示柱状图
- [ ] 验证图表数据是否正确（待支付、已支付、已发货、已完成、已取消）

#### 5.4 表格展示
- [ ] 在报表查看页面
- [ ] 验证是否同时显示表格和图表
- [ ] 验证表格数据是否与图表数据一致
- [ ] 验证表格列是否正确显示

**预期结果**:
- ✅ 参数表单正常显示
- ✅ 查询执行正常
- ✅ 图表正确渲染
- ✅ 表格正确显示
- ✅ 数据正确展示

---

### 6. 用户管理验证

#### 6.1 用户列表
- [ ] 点击左侧菜单"用户管理"
- [ ] 验证是否显示用户列表
- [ ] 验证列表是否包含以下列：ID、用户名、真实姓名、邮箱、电话、状态、角色、创建时间、操作
- [ ] 验证是否显示3条Mock数据：
  - admin（管理员）
  - analyst（分析师）
  - viewer（查看者）

#### 6.2 搜索功能
- [ ] 在搜索框输入"admin"
- [ ] 点击"搜索"按钮
- [ ] 验证是否只显示包含"admin"的用户

#### 6.3 新建用户
- [ ] 点击"新建用户"按钮
- [ ] 填写表单：
  - 用户名：testuser
  - 真实姓名：测试用户
  - 邮箱：test@example.com
  - 电话：13800138888
  - 密码：123456
  - 角色：选择"查看者"
- [ ] 点击"确定"按钮
- [ ] 验证是否成功创建并显示在列表中

#### 6.4 编辑用户
- [ ] 点击某个用户的"编辑"按钮
- [ ] 修改用户信息
- [ ] 点击"确定"按钮
- [ ] 验证是否成功更新

#### 6.5 删除用户
- [ ] 点击某个用户的"删除"按钮
- [ ] 确认删除操作
- [ ] 验证用户是否从列表中移除

#### 6.6 状态切换
- [ ] 点击某个用户的状态开关
- [ ] 验证状态是否切换（启用/禁用）

#### 6.7 分配角色
- [ ] 点击某个用户的"分配角色"按钮
- [ ] 选择角色
- [ ] 点击"确定"按钮
- [ ] 验证角色是否成功分配

**预期结果**:
- ✅ 用户列表正常显示
- ✅ 搜索功能正常
- ✅ 新建、编辑、删除功能正常
- ✅ 状态切换功能正常
- ✅ 角色分配功能正常

---

### 7. 角色管理验证

#### 7.1 角色列表
- [ ] 点击左侧菜单"用户管理" -> "角色管理"
- [ ] 验证是否显示角色列表
- [ ] 验证列表是否包含以下列：ID、角色名称、角色编码、描述、创建时间
- [ ] 验证是否显示3条Mock数据：
  - 管理员（ADMIN）
  - 分析师（ANALYST）
  - 查看者（VIEWER）

**预期结果**:
- ✅ 角色列表正常显示
- ✅ 角色信息完整

---

### 8. 权限管理验证

#### 8.1 权限列表
- [ ] 点击左侧菜单"权限管理"
- [ ] 验证是否显示权限列表
- [ ] 验证列表是否包含以下列：ID、报表名称、目标类型、目标名称、权限级别、创建时间、操作
- [ ] 验证是否显示Mock权限数据

#### 8.2 授予用户权限
- [ ] 点击"授予用户权限"按钮
- [ ] 选择报表
- [ ] 选择用户
- [ ] 选择权限级别（查看/编辑/管理）
- [ ] 点击"确定"按钮
- [ ] 验证是否成功授予权限

#### 8.3 授予角色权限
- [ ] 点击"授予角色权限"按钮
- [ ] 选择报表
- [ ] 选择角色
- [ ] 选择权限级别
- [ ] 点击"确定"按钮
- [ ] 验证是否成功授予权限

#### 8.4 撤销权限
- [ ] 点击某个权限的"撤销"按钮
- [ ] 确认撤销操作
- [ ] 验证权限是否从列表中移除

**预期结果**:
- ✅ 权限列表正常显示
- ✅ 授予用户权限功能正常
- ✅ 授予角色权限功能正常
- ✅ 撤销权限功能正常

---

### 9. 退出登录验证

#### 9.1 退出登录
- [ ] 点击顶部用户头像
- [ ] 点击"退出登录"
- [ ] 验证是否跳转到登录页面
- [ ] 验证是否清除了登录状态

#### 9.2 未登录访问保护
- [ ] 退出登录后
- [ ] 直接访问 `http://localhost:3000/dashboard`
- [ ] 验证是否自动跳转到登录页面

**预期结果**:
- ✅ 退出登录功能正常
- ✅ 路由守卫正常工作

---

## 🎨 UI/UX验证

### 10.1 响应式布局
- [ ] 调整浏览器窗口大小
- [ ] 验证页面布局是否自适应
- [ ] 验证表格是否支持横向滚动

### 10.2 加载状态
- [ ] 执行各种操作（查询、保存、删除等）
- [ ] 验证是否显示加载动画
- [ ] 验证加载完成后是否正确显示结果

### 10.3 错误提示
- [ ] 触发各种错误场景
- [ ] 验证是否显示友好的错误提示信息

### 10.4 成功提示
- [ ] 执行成功的操作
- [ ] 验证是否显示成功提示信息

### 10.5 确认对话框
- [ ] 执行删除、下线等危险操作
- [ ] 验证是否显示确认对话框
- [ ] 验证取消操作是否正常

**预期结果**:
- ✅ 响应式布局正常
- ✅ 加载状态正常显示
- ✅ 错误提示友好
- ✅ 成功提示正常
- ✅ 确认对话框正常

---

## 📊 图表验证

### 11.1 折线图
- [ ] 查看销售数据报表
- [ ] 验证折线图是否正确渲染
- [ ] 验证X轴是否显示日期
- [ ] 验证Y轴是否显示数值
- [ ] 验证鼠标悬停是否显示tooltip

### 11.2 饼图
- [ ] 查看用户分析报表
- [ ] 验证饼图是否正确渲染
- [ ] 验证是否显示图例
- [ ] 验证鼠标悬停是否显示tooltip
- [ ] 验证数据占比是否正确

### 11.3 柱状图
- [ ] 查看订单统计报表
- [ ] 验证柱状图是否正确渲染
- [ ] 验证X轴是否显示分类
- [ ] 验证Y轴是否显示数值
- [ ] 验证鼠标悬停是否显示tooltip

**预期结果**:
- ✅ 所有图表类型都能正确渲染
- ✅ 图表交互正常
- ✅ 数据展示准确

---

## 🐛 已知问题

目前Mock模式下的已知限制：

1. **数据持久化**: Mock数据仅存储在浏览器内存中，刷新页面后会重置
2. **文件导出**: 导出功能在Mock模式下不可用
3. **图片上传**: 图片上传功能在Mock模式下不可用
4. **实时刷新**: 报表数据不会实时刷新，需要手动执行查询

---

## 📝 验证报告模板

### 验证信息
- **验证人**: ___________
- **验证日期**: ___________
- **浏览器**: ___________
- **浏览器版本**: ___________
- **操作系统**: ___________

### 验证结果

| 功能模块 | 验证项 | 通过 | 失败 | 备注 |
|---------|--------|------|------|------|
| 登录功能 | 正常登录 | ☐ | ☐ | |
| 登录功能 | 登录失败 | ☐ | ☐ | |
| 登录功能 | 表单验证 | ☐ | ☐ | |
| 数据源管理 | 列表展示 | ☐ | ☐ | |
| 数据源管理 | 搜索功能 | ☐ | ☐ | |
| 数据源管理 | 新建数据源 | ☐ | ☐ | |
| 数据源管理 | 编辑数据源 | ☐ | ☐ | |
| 数据源管理 | 删除数据源 | ☐ | ☐ | |
| 数据源管理 | 测试连接 | ☐ | ☐ | |
| 报表管理 | 列表展示 | ☐ | ☐ | |
| 报表管理 | 状态筛选 | ☐ | ☐ | |
| 报表管理 | 搜索功能 | ☐ | ☐ | |
| 报表管理 | 查看详情 | ☐ | ☐ | |
| 报表管理 | 编辑报表 | ☐ | ☐ | |
| 报表管理 | 发布报表 | ☐ | ☐ | |
| 报表管理 | 下线报表 | ☐ | ☐ | |
| 报表管理 | 删除报表 | ☐ | ☐ | |
| 报表设计器 | 新建报表 | ☐ | ☐ | |
| 报表设计器 | 编辑报表 | ☐ | ☐ | |
| 报表设计器 | 表单验证 | ☐ | ☐ | |
| 报表查看 | 参数输入 | ☐ | ☐ | |
| 报表查看 | 执行查询 | ☐ | ☐ | |
| 报表查看 | 图表展示 | ☐ | ☐ | |
| 报表查看 | 表格展示 | ☐ | ☐ | |
| 用户管理 | 列表展示 | ☐ | ☐ | |
| 用户管理 | 搜索功能 | ☐ | ☐ | |
| 用户管理 | 新建用户 | ☐ | ☐ | |
| 用户管理 | 编辑用户 | ☐ | ☐ | |
| 用户管理 | 删除用户 | ☐ | ☐ | |
| 用户管理 | 分配角色 | ☐ | ☐ | |
| 角色管理 | 列表展示 | ☐ | ☐ | |
| 权限管理 | 列表展示 | ☐ | ☐ | |
| 权限管理 | 授予用户权限 | ☐ | ☐ | |
| 权限管理 | 授予角色权限 | ☐ | ☐ | |
| 权限管理 | 撤销权限 | ☐ | ☐ | |
| 退出登录 | 退出功能 | ☐ | ☐ | |
| 退出登录 | 路由守卫 | ☐ | ☐ | |

### 总体评价
- **通过率**: _____ %
- **整体评价**: ☐ 优秀  ☐ 良好  ☐ 一般  ☐ 需改进
- **建议**:
  - ___________
  - ___________
  - ___________

---

## 🔧 故障排除

### 问题1: Mock模式未生效
**症状**: 页面显示"网络错误"或"连接失败"

**解决方案**:
1. 确认URL中包含 `?mock=true`
2. 打开浏览器控制台，查看是否有 "🎭 Mock模式已启用" 的日志
3. 清除浏览器缓存后重试
4. 确认前端服务正常启动

### 问题2: 页面无法访问
**症状**: 浏览器显示"无法访问此网站"

**解决方案**:
1. 确认前端服务已启动
2. 确认访问地址正确：`http://localhost:3000`
3. 检查端口3000是否被占用
4. 尝试使用其他端口：修改 `frontend/vite.config.ts` 中的 `server.port`

### 问题3: 图表不显示
**症状**: 报表查看页面图表区域空白

**解决方案**:
1. 打开浏览器控制台，查看是否有错误信息
2. 确认ECharts库已正确加载
3. 刷新页面重试
4. 检查Mock数据是否正确返回

### 问题4: 登录后立即退出
**症状**: 登录成功后又跳转回登录页

**解决方案**:
1. 清除浏览器localStorage
2. 确认Mock模式已启用
3. 检查浏览器控制台是否有401错误

---

## 📞 技术支持

如遇到问题，请按以下步骤操作：

1. **查看控制台日志**: 打开浏览器开发者工具（F12），查看Console标签页
2. **查看网络请求**: 打开Network标签页，查看API请求是否正常
3. **查看Mock日志**: 确认是否有 "🎭 Mock拦截" 的日志
4. **重启服务**: 停止前端服务，重新启动
5. **清除缓存**: 清除浏览器缓存和localStorage

---

## 📚 相关文档

- [需求文档](./REQUIREMENT.md)
- [架构设计](./Architecture.MD)
- [项目结构](./PROJECT_STRUCTURE.md)
- [实现指南](./REALTIME_IMPLEMENTATION_GUIDE.md)

---

**文档结束**
