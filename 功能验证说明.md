# DW Dashboard Management - 功能验证说明

## 🎯 快速开始

本项目已集成Mock数据功能，可以在不启动后端服务的情况下进行前端功能验证。

### 方式一：使用启动脚本（推荐）

```bash
# 在项目根目录执行
./bin/start-verification.sh
```

选择 "1" 启动Mock模式，然后访问：`http://localhost:3000?mock=true`

### 方式二：手动启动

```bash
# 1. 进入前端目录
cd frontend

# 2. 安装依赖（首次运行）
npm install

# 3. 启动开发服务器
npm run dev

# 4. 在浏览器中访问（URL中添加 ?mock=true）
http://localhost:3000?mock=true
```

## 👤 测试账号

| 用户名 | 密码 | 角色 |
|--------|------|------|
| admin | 123456 | 管理员 |
| analyst | 123456 | 分析师 |
| viewer | 123456 | 查看者 |

## 📋 功能清单

### ✅ 已实现的功能

1. **登录认证**
   - 用户名密码登录
   - Token认证
   - 路由守卫

2. **数据源管理**
   - 数据源列表（分页、搜索）
   - 新建数据源
   - 编辑数据源
   - 删除数据源
   - 测试连接
   - 状态切换
   - 支持5种数据库：MySQL, PostgreSQL, Oracle, SQL Server, ClickHouse

3. **报表管理**
   - 报表列表（分页、搜索、状态筛选）
   - 查看报表详情
   - 编辑报表
   - 发布报表（草稿→已发布）
   - 下线报表（已发布→已下线）
   - 删除报表

4. **报表设计器**
   - 新建报表
   - 编辑报表
   - 配置基本信息（名称、描述、分类）
   - 选择数据源
   - 编写SQL语句
   - 配置查询参数
   - 配置缓存策略
   - 配置分页
   - 选择图表类型（table, line, bar, pie）

5. **报表查看（执行查询）**
   - 动态参数表单
   - 执行查询
   - 表格展示
   - 图表展示（ECharts）
   - 支持多种图表类型

6. **用户管理**
   - 用户列表（分页、搜索）
   - 新建用户
   - 编辑用户
   - 删除用户
   - 启用/禁用用户
   - 分配角色

7. **角色管理**
   - 角色列表展示

8. **权限管理**
   - 权限列表（分页）
   - 授予用户权限
   - 授予角色权限
   - 撤销权限
   - 权限级别：view（查看）, edit（编辑）, manage（管理）

## 🎭 Mock模式说明

### 启用方式

1. **URL参数方式**（推荐）
   ```
   http://localhost:3000?mock=true
   ```

2. **环境变量方式**
   ```bash
   export VITE_USE_MOCK=true
   npm run dev
   ```

### Mock数据

Mock数据位于 `frontend/src/mock/` 目录：

- `data.ts` - Mock数据定义
- `index.ts` - Mock服务拦截器

### Mock特性

- ✅ 完整的CRUD操作
- ✅ 模拟网络延迟（300ms）
- ✅ 模拟成功/失败响应
- ✅ 数据持久化（浏览器内存）
- ✅ 自动拦截所有/api请求

### 限制

- ❌ 数据仅存储在内存中，刷新页面会重置
- ❌ 文件导出功能不可用
- ❌ 图片上传功能不可用

## 📚 详细文档

- [功能验证指南](./claude/BROWSER_VERIFICATION_GUIDE.md) - 完整的功能验证步骤
- [需求文档](./claude/REQUIREMENT.md) - 系统需求说明
- [架构设计](./claude/Architecture.MD) - 系统架构设计
- [项目结构](./claude/PROJECT_STRUCTURE.md) - 项目文件结构

## 🐛 故障排除

### Mock模式未生效

1. 确认URL中包含 `?mock=true`
2. 打开浏览器控制台，查看是否有 "🎭 Mock模式已启用" 的日志
3. 清除浏览器缓存后重试

### 页面无法访问

1. 确认前端服务已启动
2. 确认访问地址正确：`http://localhost:3000`
3. 检查端口3000是否被占用

### 图表不显示

1. 打开浏览器控制台，查看是否有错误信息
2. 确认ECharts库已正确加载
3. 刷新页面重试

## 📞 技术支持

如遇到问题：

1. 查看浏览器控制台日志（F12 -> Console）
2. 查看网络请求（F12 -> Network）
3. 查看Mock日志（确认是否有 "🎭 Mock拦截" 的日志）
4. 重启前端服务
5. 清除浏览器缓存

## 🚀 下一步

完成功能验证后，可以：

1. 启动后端服务进行联调
2. 进行性能测试
3. 进行安全测试
4. 部署到测试环境

---

**祝验收顺利！** 🎉
